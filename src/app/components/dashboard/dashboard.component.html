<h3 class="mt-3">Dashboard</h3>
<hr>


<!-- Cards Carousel -->
<div class="cards-carousel">
  <div class="carousel-container">
    <div class="carousel-track" [style.transform]="'translateX(-' + (currentCardIndex * 100) + '%)'">
      <!-- Total Spend Card -->
      <div class="carousel-card total-spend">
        <div class="card-content">
          <i class="bi bi-cash-coin cash-icon"></i>
          <div class="card-text">
            <div class="card-label">Total Spend</div>
            <div class="card-amount">₹{{ total(selectedMonth) }}</div>
            <div class="card-subtitle">for {{ getMonthName(selectedMonth) }}</div>
          </div>
        </div>
      </div>

      <!-- Total Lent Card -->
      <div class="carousel-card total-lent" *ngIf="activeLendings.length > 0">
        <div class="card-content">
          <i class="bi bi-arrow-up-circle cash-icon"></i>
          <div class="card-text">
            <div class="card-label">Total Lent</div>
            <div class="card-amount">₹{{ getTotalLent() | number:'1.2-2' }}</div>
            <div class="card-subtitle">to others</div>
          </div>
        </div>
      </div>

      <!-- Total Borrowed Card -->
      <div class="carousel-card total-borrowed" *ngIf="activeLendings.length > 0">
        <div class="card-content">
          <i class="bi bi-arrow-down-circle cash-icon"></i>
          <div class="card-text">
            <div class="card-label">Total Borrowed</div>
            <div class="card-amount">₹{{ getTotalBorrowed() | number:'1.2-2' }}</div>
            <div class="card-subtitle">from others</div>
          </div>
        </div>
      </div>

      <!-- Financial Insights Card -->
      <div class="carousel-card financial-insights" *ngIf="getMonthlyIncome() > 0">
        <div class="card-content">
          <i class="bi bi-graph-up-arrow cash-icon"></i>
          <div class="card-text">
            <div class="card-label">Financial Health</div>
            <div class="insights-content">
              <div class="insight-row">
                <span class="insight-label">Spent:</span>
                <span class="insight-value" [style.color]="getFinancialInsight().color">
                  {{ getFinancialInsight().spendingPercentage }}%
                </span>
              </div>
              <div class="insight-row">
                <span class="insight-label">Remaining:</span>
                <span class="insight-value" [style.color]="getFinancialInsight().color">
                  ₹{{ getFinancialInsight().remainingAmount | number:'1.2-2' }}
                </span>
              </div>
              <div class="rating-badge" [style.background-color]="getFinancialInsight().color">
                {{ getFinancialInsight().rating | titlecase }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Carousel Controls -->
  <div class="carousel-controls" *ngIf="getTotalCards() > 1">
    <button class="carousel-btn prev" (click)="previousCard()" [disabled]="currentCardIndex === 0">
      <i class="bi bi-chevron-left"></i>
    </button>
    <div class="carousel-dots">
      <span *ngFor="let i of getCardIndices()" 
            class="dot" 
            [class.active]="i === currentCardIndex"
            (click)="goToCard(i)"></span>
    </div>
    <button class="carousel-btn next" (click)="nextCard()" [disabled]="currentCardIndex === getTotalCards() - 1">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</div>
<div class="form-group">
  <div class="row">
    <div class="col-md-6">
      <label>Select Month:</label>
      <select class="form-select" [(ngModel)]="selectedMonth">
        <option *ngFor="let m of months" [value]="m">{{ m }}</option>
      </select>
    </div>
  </div>
</div>

<app-expense-list [month]="selectedMonth"></app-expense-list>

<!-- Floating action button to add a new expense -->
<a class="btn btn-primary rounded-circle fab" routerLink="/add" aria-label="Add Expense" [class.fab-transparent]="scrolled">
  <i class="bi bi-plus-lg"></i>
</a>
